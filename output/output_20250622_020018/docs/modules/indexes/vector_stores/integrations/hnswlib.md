---
url: https://js.langchain.com.cn/docs/modules/indexes/vector_stores/integrations/hnswlib
crawled_at: 2025-06-22T02:00:24.333772
---

HNSWLib
兼容性
仅适用于Node.js。
HNSWLib是一个内存向量存储器，可以保存到文件中。它使用
HNSWLib
。
设置
​
:::注意
在Windows上
，你可能需要先安装
Visual Studio
才能正确构建
hnswlib-node
包。
:::
您可以通过以下方式进行安装
npm
Yarn
pnpm
npm
install
hnswlib-node
yarn
add
hnswlib-node
pnpm
add
hnswlib-node
用法
​
从文本创建新索引
​
import
{
HNSWLib
}
from
"langchain/vectorstores/hnswlib"
;
import
{
OpenAIEmbeddings
}
from
"langchain/embeddings/openai"
;
const
vectorStore
=
await
HNSWLib
.
fromTexts
(
[
"Hello world"
,
"Bye bye"
,
"hello nice world"
]
,
[
{
id
:
2
}
,
{
id
:
1
}
,
{
id
:
3
}
]
,
new
OpenAIEmbeddings
(
)
)
;
const
resultOne
=
await
vectorStore
.
similaritySearch
(
"hello world"
,
1
)
;
console
.
log
(
resultOne
)
;
从加载器创建新索引
​
import
{
HNSWLib
}
from
"langchain/vectorstores/hnswlib"
;
import
{
OpenAIEmbeddings
}
from
"langchain/embeddings/openai"
;
import
{
TextLoader
}
from
"langchain/document_loaders/fs/text"
;
// Create docs with a loader
const
loader
=
new
TextLoader
(
"src/document_loaders/example_data/example.txt"
)
;
const
docs
=
await
loader
.
load
(
)
;
// Load the docs into the vector store
const
vectorStore
=
await
HNSWLib
.
fromDocuments
(
docs
,
new
OpenAIEmbeddings
(
)
)
;
// Search for the most similar document
const
result
=
await
vectorStore
.
similaritySearch
(
"hello world"
,
1
)
;
console
.
log
(
result
)
;
将索引保存到文件并重新加载
​
import
{
HNSWLib
}
from
"langchain/vectorstores/hnswlib"
;
import
{
OpenAIEmbeddings
}
from
"langchain/embeddings/openai"
;
// Create a vector store through any method, here from texts as an example
const
vectorStore
=
await
HNSWLib
.
fromTexts
(
[
"Hello world"
,
"Bye bye"
,
"hello nice world"
]
,
[
{
id
:
2
}
,
{
id
:
1
}
,
{
id
:
3
}
]
,
new
OpenAIEmbeddings
(
)
)
;
// Save the vector store to a directory
const
directory
=
"your/directory/here"
;
await
vectorStore
.
save
(
directory
)
;
// Load the vector store from the same directory
const
loadedVectorStore
=
await
HNSWLib
.
load
(
directory
,
new
OpenAIEmbeddings
(
)
)
;
// vectorStore and loadedVectorStore are identical
const
result
=
await
loadedVectorStore
.
similaritySearch
(
"hello world"
,
1
)
;
console
.
log
(
result
)
;
过滤文档
​
import
{
HNSWLib
}
from
"langchain/vectorstores/hnswlib"
;
import
{
OpenAIEmbeddings
}
from
"langchain/embeddings/openai"
;
const
vectorStore
=
await
HNSWLib
.
fromTexts
(
[
"Hello world"
,
"Bye bye"
,
"hello nice world"
]
,
[
{
id
:
2
}
,
{
id
:
1
}
,
{
id
:
3
}
]
,
new
OpenAIEmbeddings
(
)
)
;
const
result
=
await
vectorStore
.
similaritySearch
(
"hello world"
,
10
,
(
document
)
=>
document
.
metadata
.
id
===
3
)
;
// only "hello nice world" will be returned
console
.
log
(
result
)
;