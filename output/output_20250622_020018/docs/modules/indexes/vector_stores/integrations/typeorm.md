---
url: https://js.langchain.com.cn/docs/modules/indexes/vector_stores/integrations/typeorm
crawled_at: 2025-06-22T02:00:24.623447
---

TypeORM
为了在通用的PostgreSQL数据库中实现向量搜索，LangChainJS支持使用
TypeORM
和
pgvector
Postgres扩展。
设置
​
要使用TypeORM，您需要安装
typeorm
和
pg
软件包:
npm
Yarn
pnpm
npm
install
typeorm
yarn
add
typeorm
pnpm
add
typeorm
npm
Yarn
pnpm
npm
install
pg
yarn
add
pg
pnpm
add
pg
使用
docker-compose
设置
pgvector
自托管实例
​
pgvector
提供了一个预构建的Docker镜像，可用于快速设置自托管的Postgres实例。
创建一个名为
docker-compose.yml
的文件:
import DockerExample from "!!raw-loader!@examples/indexes/vector_stores/typeorm_vectorstore/docker-compose.example.yml";
<CodeBlock language="yml" name="docker-compose.yml">{DockerExample}</CodeBlock>
然后在相同的目录下运行
docker compose up
来启动容器。
您可以在
官方存储库
中找到有关如何设置
pgvector
的更多信息。
用法
​
使用
TypeORMVectorStore
的一个完整的示例如下:
import
{
DataSourceOptions
}
from
"typeorm"
;
import
{
OpenAIEmbeddings
}
from
"langchain/embeddings/openai"
;
import
{
TypeORMVectorStore
}
from
"langchain/vectorstores/typeorm"
;
// First, follow set-up instructions at
// https://js.langchain.com/docs/modules/indexes/vector_stores/integrations/typeorm
export
const
run
=
async
(
)
=>
{
const
args
=
{
postgresConnectionOptions
:
{
type
:
"postgres"
,
host
:
"localhost"
,
port
:
5432
,
username
:
"myuser"
,
password
:
"ChangeMe"
,
database
:
"api"
,
}
as
DataSourceOptions
,
}
;
const
typeormVectorStore
=
await
TypeORMVectorStore
.
fromDataSource
(
new
OpenAIEmbeddings
(
)
,
args
)
;
await
typeormVectorStore
.
ensureTableInDatabase
(
)
;
await
typeormVectorStore
.
addDocuments
(
[
{
pageContent
:
"what's this"
,
metadata
:
{
a
:
2
}
}
,
{
pageContent
:
"Cat drinks milk"
,
metadata
:
{
a
:
1
}
}
,
]
)
;
const
results
=
await
typeormVectorStore
.
similaritySearch
(
"hello"
,
2
)
;
console
.
log
(
results
)
;
}
;